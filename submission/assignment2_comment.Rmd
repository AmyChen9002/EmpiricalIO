---
title: 'Assignment 2: Comments for the Best Practice'
author: "Kohei Kawaguchi"
date: "2019/3/4"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```

## Running out of time?

- Some students did no complete the problems mainly due to the computation of the non-parametric part did not finish.
- First, upgrade your laptop. Macbook-pro-level laptops are __necessary__ for PhD students who are going to do a quantitative research.
- Second, learn how to manage time-consuming projects.
    1. Writing up all the codes and then running the entire codes is a bad practice. It causes bugs. You cannot assess the computation time. Divide the task into pieces. Complete each small piece before moving to next piece. 
    2. For computationally demanding tasks, first try with a small scale problem annd asses how much time it will take for solving the large scale problem.


## Post estimation

- Making inference and prediction after estimation is called __post estimation__ tasks.
- In this assignment, we estimated the following model:
$$
y_{jt} = \beta_l l_{jt} + \phi(k_{jt}, I_{jt}) + \eta_{jt},
$$
using the kernel estimator for $\phi$.
- There are three steps in the analysis:
1. Choose the bandwidth for the kernel estimator of $\phi$.
```{r, eval = FALSE}
result_1st_bw <-
  np::npplregbw(data = df_T,
            formula = y_error ~ l_error + k + I| k + I)
```
2. Estimate $\phi$ with the bandwidth chosen in 1.
```{r, eval = FALSE}
result_1st <-
  npplreg(data = df_T,
          formula = y_error ~ l_error + k + I| k + I,
          bws = result_1st_bw)
```
3. Use the estimates to obtain the fitted value $\widehat{\phi}(k_{jt}, I_{jt})$.
```{r, eval = FALSE}
phi <- fitted(result_1st) - 
  result_1st$xcoef["l_error"] * df_T$l_error
```

